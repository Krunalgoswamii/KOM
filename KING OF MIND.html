<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KING OF MIND</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(to right, #2e3b4e, #5f6a82);
            color: #e1e8f0;
            text-align: center;
            margin: 0;
            padding: 20px;
            overflow-x: hidden;
        }

        h1 {
            font-size: 3rem;
            margin-bottom: 20px;
            color: #d1e0e0;
            text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.2);
            animation: fadeIn 2s ease-out;
        }

        @keyframes waveAnimation {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}

body {
    background: linear-gradient(270deg, #2e3b4e, #5f6a82, #7890a8, #2e3b4e);
    background-size: 400% 400%;
    animation: waveAnimation 10s infinite ease-in-out;
}
.glass-container {
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
    border-radius: 15px;
    padding: 20px;
    box-shadow: 0px 0px 20px rgba(255, 255, 255, 0.2);
}

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .input-container {
            margin: 20px auto;
            padding: 20px;
            background-color: #3c4a61;
            border-radius: 15px;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
            width: 350px;
            animation: slideIn 1.5s ease-out;
        }

        @keyframes slideIn {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .box {
            display: inline-block;
            width: 60px;
            height: 60px;
            line-height: 60px;
            margin: 8px;
            background-color: #4f5d6b;
            text-align: center;
            border: 2px solid #32414a;
            border-radius: 10px;
            font-weight: bold;
            color: #e1e8f0;
            cursor: pointer;
            transition: transform 0.3s ease, background-color 0.3s ease, box-shadow 0.3s ease;
        }

        .box:hover {
            background-color: #3a4a59;
            color: #ffffff;
            transform: scale(1.1);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }

        .scoreboard {
            margin-top: 20px;
            padding: 20px;
            background: rgba(60, 64, 74, 0.9);
            border-radius: 15px;
            display: inline-block;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
            animation: fadeIn 2s ease-out;
        }

        .scoreboard h2 {
            margin: 0 0 15px;
            font-size: 1.8rem;
        }

        .scoreboard div {
            font-size: 1.4rem;
            margin: 10px 0;
            animation: scoreChange 0.5s ease-in-out;
        }

        @keyframes scoreChange {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .result-box {
    background: rgba(34, 34, 34, 0.3); /* 70% transparent (30% opacity) */
    backdrop-filter: blur(10px); /* Blur effect for smooth glass look */
    color: #fff;
    padding: 15px;
    border-radius: 10px;
    box-shadow: 0 6px 15px rgba(255, 255, 255, 0.1); /* Soft glow */
    text-align: center;
    font-size: 1.2rem;
    display: inline-block; /* Content jitna ho utna size le */
    max-width: 80%; /* Max width taaki bohot bada na ho */
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.result-box:hover {
    transform: scale(1.02);
    box-shadow: 0 10px 20px rgba(255, 255, 255, 0.2);
}

/* üé≠ Score Change Animation */
@keyframes scoreChange {
    from { opacity: 0; transform: scale(0.9); }
    to { opacity: 1; transform: scale(1); }
}

.score-changes li {
    animation: scoreChange 0.4s ease-in-out;
}

/* ‚úÖ Winner Green Glowing Effect */
.highlight-green {
    color: #4CAF50;
    font-weight: bold;
    text-shadow: 0px 0px 10px rgba(76, 175, 80, 0.8);
}

/* ‚ùå Eliminated Red Glow */
.highlight-red {
    color: #E74C3C;
    font-weight: bold;
    text-shadow: 0px 0px 10px rgba(231, 76, 60, 0.8);
}

/* ‚ö† Yellow Glow for Warnings */
.highlight-yellow {
    color: #F1C40F;
    font-weight: bold;
    text-shadow: 0px 0px 10px rgba(241, 196, 15, 0.8);
}

/* üéØ Blue for Target Answer */
.highlight-blue {
    color: #3498DB;
    font-weight: bold;
    text-shadow: 0px 0px 10px rgba(52, 152, 219, 0.8);
}

/* üìú Rules Box Soft Glass Effect */
.rules-box {
    background: rgba(255, 255, 255, 0.1);
    padding: 12px;
    border-radius: 10px;
    box-shadow: 0 2px 5px rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(8px);
}

/* üé≤ Numbers & Score List Styling */
.selected-numbers, .score-changes {
    max-height: 300px; /* Zyada bada na ho */
    overflow-y: auto; /* Agar zyada items ho to scrollbar aaye */
}

.selected-numbers li, .score-changes li {
    padding: 6px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.2);
    font-size: 1.1rem;
}

/* ‚û° Next Button Animation */
.next-btn {
    background: linear-gradient(90deg, #4cafaf, #6684bb);
    color: white;
    padding: 12px 18px;
    font-size: 1.2rem;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    margin-top: 15px;
    transition: transform 0.3s, box-shadow 0.3s;
}

.next-btn:hover {
    transform: scale(1.05);
    box-shadow: 0px 0px 15px rgba(76, 175, 80, 0.8);
}


        button {
            margin-top: 20px;
            padding: 12px 30px;
            font-size: 1.1rem;
            color: #fff;
            background-color: #32414a;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.3s ease;
        }

        button:hover {
            background-color: #2b3748;
            transform: scale(1.05);
        }

        .player-name {
            margin-bottom: 10px;
        }

        .rule-book {
            margin-top: 30px;
            padding: 15px;
            background-color: #2e3b4e;
            border-radius: 15px;
            font-size: 1.2rem;
            color: #e1e8f0;
            animation: slideIn 1.5s ease-out;
        }

        .rule-book h3 {
            font-size: 1.5rem;
            margin-bottom: 15px;
        }

        .scoreboard div, .result p {
            font-size: 1.6rem;
        }
        #eliminated-box {
    display: none;
    background: rgba(255, 77, 77, 0.2); /* Light red transparent */
    padding: 15px;
    border-radius: 10px;
    box-shadow: 0 4px 10px rgba(255, 0, 0, 0.3); /* Red glow effect */
    text-align: center;
    animation: fadeInScale 0.8s ease-in-out; /* Smooth animation */
    transition: all 0.5s ease-in-out;
}

#eliminated-box h2 {
    color: #ff4d4d; /* Bright red title */
}

#eliminated-table {
    width: 100%;
    border-collapse: collapse;
}

#eliminated-table th, #eliminated-table td {
    border: 1px solid rgba(255, 0, 0, 0.5);
    padding: 8px;
    text-align: center;
    color: white;
}

#eliminated-table th {
    background: rgba(255, 77, 77, 0.6); /* Slightly stronger red */
}

@keyframes fadeInScale {
    from {
        opacity: 0;
        transform: scale(0.8);
    }
    to {
        opacity: 1;
        transform: scale(1);
    }
}

.reverse-popup {
    display: none;
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(1);
    background: rgba(0, 0, 0, 0.9);
    color: white;
    padding: 30px 60px;
    font-size: 3.5rem;
    font-weight: bold;
    text-transform: uppercase;
    text-align: center;
    border: 5px solid rgba(255, 0, 0, 0.9);
    box-shadow: 0px 0px 15px red, 0px 0px 20px blue;
    z-index: 1000;
    animation: glitchText 0.1s infinite alternate, shakeEffect 0.2s infinite alternate;
}

/* üåü Glitch Text Animation */
@keyframes glitchText {
    0% { text-shadow: 3px 3px red, -3px -3px blue; transform: skewX(-10deg); }
    50% { text-shadow: -3px 3px red, 3px -3px blue; transform: skewX(10deg); }
    100% { text-shadow: 3px -3px red, -3px 3px blue; transform: skewX(-10deg); }
}

/* üå™Ô∏è Screen Shake Effect */
@keyframes shakeEffect {
    0% { transform: translate(-50%, -50%) scale(1.05) rotate(2deg); }
    50% { transform: translate(-50%, -50%) scale(1) rotate(-2deg); }
    100% { transform: translate(-50%, -50%) scale(1.05) rotate(2deg); }
}

/* ‚ö° Neon Flash Effect */
.reverse-flash {
    animation: screenFlash 0.5s infinite alternate;
}

@keyframes screenFlash {
    0% { background: rgba(255, 0, 0, 0.2); }
    100% { background: rgba(0, 0, 255, 0.2); }
}

        #winner-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.9);
        color: white;
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
        text-align: center;
        font-size: 2.5rem;
        font-family: Arial, sans-serif;
        z-index: 9999;
        opacity: 0;
        visibility: hidden;
        transition: opacity 1s ease-in-out, visibility 0.5s;
        padding: 20px;
    }

    /* Show overlay with animation */
    #winner-overlay.show {
        opacity: 1;
        visibility: visible;
    }
    #winner-text {
    font-size: 3.5rem; /* Increased size */
    font-weight: bold;
    text-transform: uppercase;
}

    /* Glowing Winner Name */
    .glow {
        font-weight: bold;
        animation: glowAnimation 1.5s infinite alternate;
    }

    @keyframes glowAnimation {
    0% { text-shadow: 0 0 10px #e61f1f, 0 0 20px #ff7300; }  /* Red */
    20% { text-shadow: 0 0 10px #f79c51, 0 0 20px #e9e639; }  /* Orange */
    40% { text-shadow: 0 0 10px #f8f661, 0 0 20px #48ff00; }  /* Yellow */
    60% { text-shadow: 0 0 10px #48ff00, 0 0 20px #00fffb; }  /* Green */
    80% { text-shadow: 0 0 10px #00fffb, 0 0 20px #8000ff; }  /* Blue */
    100% { text-shadow: 0 0 10px #8000ff, 0 0 20px #ff0000; }  /* Purple */
}

    /* Winner trophy */
    .trophy {
        font-size: 4rem;
        margin-top: 10px;
    }

    /* Restart Button */
    #restart-btn {
        background: gold;
        color: black;
        border: none;
        padding: 15px 30px;
        font-size: 1.5rem;
        cursor: pointer;
        margin-top: 20px;
        border-radius: 10px;
        transition: 0.3s;
    }

    #restart-btn:hover {
        background: darkgoldenrod;
    }

    /* Eliminated Players Section */
    #eliminated-players {
        margin-top: 20px;
        font-size: 1.2rem;
        text-align: left;
    }

    .eliminated-player {
        margin: 5px 0;
        padding: 5px;
    }

    .badge {
        font-size: 1.5rem;
        margin-left: 10px;
    }
    /* Confetti Animation */
    @keyframes confetti {
        0% { transform: translateY(0); }
        100% { transform: translateY(100vh); }
    }

    .confetti {
        position: absolute;
        width: 10px;
        height: 10px;
        background: gold;
        top: -10px;
        opacity: 0.8;
        animation: confetti 3s linear infinite;
    }
</style>

<div id="winner-overlay">
    <h1 id="winner-text"></h1>
    <div class="trophy">üèÜ</div>
    <p id="winner-badge"></p>
    <div id="eliminated-players"></div>
    <button id="restart-btn" onclick="restartGame()">Restart Game</button>
</div>
        
        
    </style>
</head>
<body>
    <h1>KING OF MIND</h1>

    <!-- Player setup -->
    <div id="playerSetup" class="input-container">
        <h2>Enter Player Names</h2>
        <div id="playerInputs"></div>
        <label for="numPlayers">Number of Players:</label>
        <input type="number" id="numPlayers" min="2" max="5" value="5">
        <button onclick="startGame()">Start Game</button>
    </div>

    <div id="reverse-mode-popup" class="reverse-popup">‚ö† REVERSE MODE ACTIVATED ‚ö†</div>

    <div style="display: flex; justify-content: center; gap: 20px;">
        <div id="scoreboard" class="scoreboard"></div>
        <div id="eliminated-box" class="scoreboard" style="display: none;">
            <h2>Eliminated Players</h2>
            <table id="eliminated-table" border="1" style="width: 100%; color: white; text-align: left;">
                <thead>
                    <tr>
                        <th>Player</th>
                        <th>Round</th>
                        <th>Wins</th>
                        <th>Losses</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
    </div>
    
    <div id="game"></div>

    <div id="result" class="result" style="display: none;"></div>

    <div class="rule-book">
        <h2>Game Rules</h2>
        <p>Players select a number between 0 and 100. The average of the selected numbers is calculated and multiplied by 0.8.</p>
        <p>The player whose number is closest to the result wins and gains +1 point. Other players lose 1 point.</p>
        <p>If a player's score reaches -10, they are eliminated from the game.</p>
        <h4>Special Rules After Elimination</h4>
        <p>4 players remaining: If there are 2 people or more choose the same number, the number they choose becomes invalid, meaning they will lose a point even if the number is closest to 4/5ths the average</p>
        <p>3 players remaining: If there is a person who chooses the exact correct number, the loser penalty will doubled.</p>
        <p>2 players remaining: If someone chooses 0, the player who chooses 100 is the winner</p>
    </div>

    <script>
        let players = [];
        let currentPlayerIndex = 0;
        let allNumbersSelected = false;
        let roundCount = 1; // Keeps track of rounds
        let numPlayers = 5;
        let reverseModeActive = false;  // Track Reverse Mode
        let normalRoundsBeforeReverse = Math.floor(Math.random() * 2) + 3;
        let reverseRoundCount = 0;

        function checkReverseMode() {
    if (players.length > 2) { // Ensure at least 3 players
        if (reverseModeActive) {
            // Reverse Mode just ran for 1 round, so reset
            reverseModeActive = false;
            reverseRoundCount = 0;
            normalRoundsBeforeReverse = Math.floor(Math.random() * 2) + 3; // Reset to 3 or 4 normal rounds
        } else if (roundCount % normalRoundsBeforeReverse === 0 && reverseRoundCount === 0) {
            // Activate Reverse Mode for only 1 round
            reverseModeActive = true;
            reverseRoundCount = 1; 
            showReverseModePopup();
        }
    } else {
        reverseModeActive = false; // Never activate with only 2 players
    }
}

function showReverseModePopup() {
    let popup = document.getElementById('reverse-mode-popup');
    
    // Flash Screen Effect
    document.body.classList.add("reverse-flash");

    // Show Popup
    popup.style.display = "block";

    setTimeout(() => {
        popup.style.display = "none";
        document.body.classList.remove("reverse-flash"); // Remove flash effect
    }, 3000); // Both effects last exactly 3 seconds
}
        // Function to generate player input fields based on the number of players
        function generatePlayerInputs() {
            const playerInputsDiv = document.getElementById('playerInputs');
            playerInputsDiv.innerHTML = ''; // Clear previous inputs
            numPlayers = document.getElementById('numPlayers').value; // Update number of players

            for (let i = 1; i <= numPlayers; i++) {
                const inputDiv = document.createElement('div');
                inputDiv.classList.add('player-name');
                inputDiv.innerHTML = ` 
                    <label for="player${i}">Player ${i} Name:</label>
                    <input type="text" id="player${i}" placeholder="Enter Player ${i} Name">
                `;
                playerInputsDiv.appendChild(inputDiv);
            }
        }

        // Generate player inputs when page loads or number of players is changed
        document.getElementById('numPlayers').addEventListener('change', generatePlayerInputs);
        generatePlayerInputs(); // Call on page load

        // Function to start the game
        function startGame() {
            players = [];
    for (let i = 1; i <= numPlayers; i++) {
        const playerName = document.getElementById(`player${i}`).value.trim();
        if (playerName) {
            players.push({ 
                id: i, 
                name: playerName, 
                score: 0, 
                selectedNumber: null, 
                wins: 0, // Track wins
                losses: 0 // Track losses
            });
        }
    }

    if (players.length < 2) {
        alert('Please enter at least 2 players');
        return;
    }

    document.getElementById('playerSetup').style.display = 'none';
    renderGame();
}

        function renderGame() {
            const gameDiv = document.getElementById('game');
            gameDiv.innerHTML = '';

            const currentPlayer = players[currentPlayerIndex];
            const playerDiv = document.createElement('div');
            playerDiv.classList.add('player');
            playerDiv.innerHTML = `<h2>${currentPlayer.name}'s Turn</h2>`;

            for (let i = 0; i <= 100; i++) {
                const box = document.createElement('div');
                box.classList.add('box');
                box.textContent = i;
                box.onclick = () => selectNumber(i);
                playerDiv.appendChild(box);
            }

            gameDiv.appendChild(playerDiv);
            renderScoreboard();
        }

        function renderScoreboard() {
            const scoreboardDiv = document.getElementById('scoreboard');
            scoreboardDiv.innerHTML = `<h2>Scoreboard (Round ${roundCount})</h2>`;

            players.forEach(player => {
                const scoreDiv = document.createElement('div');
                scoreDiv.textContent = `${player.name}: ${player.score}`;
                scoreboardDiv.appendChild(scoreDiv);
            });
        }

        function selectNumber(number) {
            if (allNumbersSelected) return;

            const currentPlayer = players[currentPlayerIndex];
            currentPlayer.selectedNumber = number;
            currentPlayerIndex++;

            if (currentPlayerIndex >= players.length) {
                allNumbersSelected = true;
                showResultButton();
            } else {
                renderGame();
            }
        }

        function showResultButton() {
            const resultDiv = document.getElementById('result');
            resultDiv.style.display = 'block';
            resultDiv.innerHTML = `
                <button onclick="showResults()">Show Results</button>
            `;
        }
        let eliminatedPlayers = []; // New array for removed players

        function showResults() {
    const selectedNumbers = players.map(p => p.selectedNumber);
    const average = selectedNumbers.reduce((sum, num) => sum + num, 0) / players.length;
    const Answer = Math.round(average * 0.8);

    let winners = [];
    let sameNumberCounts = {};
    let rulesApplied = [];
    let scoreChanges = [];
    let bestDifference = reverseModeActive ? -Infinity : Infinity;
    if (reverseModeActive) {
    rulesApplied.push("‚ö† <strong>Reverse Mode:</strong> <span class='highlight-red'>Farthest number from the answer wins this round!</span>");
}

    // Count occurrences of selected numbers
    selectedNumbers.forEach(num => {
        sameNumberCounts[num] = (sameNumberCounts[num] || 0) + 1;
    });

    // Find closest players to the Answer
    players.forEach(player => {
        const diff = Math.abs(player.selectedNumber - Answer);
        
        if (reverseModeActive) { 
            if (diff > bestDifference) {
                bestDifference = diff;
                winners = [player];
            } else if (diff === bestDifference) {
                winners.push(player);
            }
        } else { 
            if (diff < bestDifference) {
                bestDifference = diff;
                winners = [player];
            } else if (diff === bestDifference) {
                winners.push(player);
            }
        }
    });

    let penaltyMultiplier = 1; // Default penalty

    // --- APPLY RULES BASED ON PLAYER COUNT ---
    if (players.length === 2) {
        // ‚úÖ 2-Player Rule: 0 vs 100 (Auto-Win)
        const playerWithZero = players.find(p => p.selectedNumber === 0);
        const playerWithHundred = players.find(p => p.selectedNumber === 100);

        if (playerWithZero && playerWithHundred) {
            winners = [playerWithHundred];
            rulesApplied.push("üèÜ <strong>Rule (2 Players):</strong> <span class='highlight-green'>100 wins automatically (0 vs 100)</span>.");
            scoreChanges.push(`‚úÖ <span class='highlight-green'>${playerWithHundred.name} wins 1 point (Auto-Win)</span>`);
        } else if (winners.some(player => player.selectedNumber === Answer)) {
            penaltyMultiplier = 2;
            rulesApplied.push("‚ö† <strong>Rule (2 Players):</strong> <span class='highlight-yellow'>Exact match ‚Üí Loser penalty doubled.</span>");
        }
    }

    if (players.length <= 3) {
        if (winners.some(player => player.selectedNumber === Answer)) {
            penaltyMultiplier = 2;
            rulesApplied.push("‚ö† <strong>Rule (3 Players):</strong> <span class='highlight-yellow'>Exact match ‚Üí Loser penalty doubled.</span>");
        }
    }

    if (players.length <= 4) {
        let duplicateWinners = [];
        Object.keys(sameNumberCounts).forEach(num => {
            if (sameNumberCounts[num] > 1) {
                let playersWithDuplicate = players.filter(p => p.selectedNumber == num);
                let anyWinner = playersWithDuplicate.some(p => winners.includes(p));

                if (anyWinner) {
                    duplicateWinners.push(...playersWithDuplicate);
                    rulesApplied.push("üö´ <strong>Rule:</strong> <span class='highlight-red'>Same number is invalid (-2 point) because a winner chose it.</span>");
                }
            }
        });

        // Apply -2 point penalty only to winning players who had a duplicate number
        duplicateWinners.forEach(player => {
            player.score -= 2;
            scoreChanges.push(`‚ùå <span class='highlight-red'>${player.name} lost 2 point (Duplicate Winner Rule)</span>`);
        });
    }

    // Apply +1 to winners
    winners.forEach(winner => {
        winner.score += 1;
        winner.wins += 1;
        scoreChanges.push(`‚úÖ <span class='highlight-green'>${winner.name} gained 1 point (Closest to Answer)</span>`);
    });

    // Apply penalties to losers
    players.forEach(player => {
        if (!winners.includes(player) && player.selectedNumber !== null) {
            player.score -= penaltyMultiplier;
            player.losses += 1;
            scoreChanges.push(`‚ö† <span class='highlight-yellow'>${player.name} lost ${penaltyMultiplier} point(s) (Not closest)</span>`);
        }
    });
    // Track eliminated players
    players.forEach(player => {
    if (player.score <= -10) {
        eliminatedPlayers.push({
            name: player.name,
            roundEliminated: roundCount,
            wins: player.wins,
            losses: player.losses
        });

        updateEliminatedTable();
    }
});
    // Remove eliminated players from active list
    players = players.filter(player => player.score > -10);

    if (players.length <= 1) {
        showFinalResults();
        return;
    }

    // Eliminate players with -10 score
    players = players.filter(player => player.score > -10);

    if (players.length <= 1) {
        showFinalResults();
        return;
    }

    // Update UI with new scoreboard
    const resultDiv = document.getElementById('result');
    resultDiv.innerHTML = `
        <div class="result-box">
            <h2><strong>Answer:</strong> <span class="highlight-blue">${Answer.toFixed(2)}</span></h2>
            <div class="rules-box">
                ${rulesApplied.length ? rulesApplied.map(rule => `<p>${rule}</p>`).join('') : `<p>No special rule applied.</p>`}
            </div>

            <p><strong>üèÜ Winners:</strong> <span class="highlight-green">${winners.map(w => w.name).join(', ')}</span></p>

            <h3><ul class="selected-numbers">
                ${players.map(p => `<li><strong>${p.name}:</strong> ${p.selectedNumber}</li>`).join('')}
            </ul></h3>

            <p><strong>Score Changes:</strong></p>
            <ul class="score-changes">
                ${scoreChanges.map(change => `<li>${change}</li>`).join('')}
            </ul>

            ${eliminatedPlayers.length > 0 ? `
                <div class="eliminated-box">
                    <h3>‚ùå Eliminated Players</h3>
                    <ul>
                        ${eliminatedPlayers.map(ep => `
                            <li>
                                <strong>${ep.name}</strong> (Round ${ep.roundEliminated}) <br>
                                
                            </li>
                        `).join('')}
                    </ul>
                </div>
            ` : ''}

            <button class="next-btn" onclick="nextRound()">‚û° Next Round</button>
        </div>
    `;
    renderScoreboard();
}
function updateEliminatedTable() {
    const eliminatedBox = document.getElementById("eliminated-box");
    const eliminatedTable = document.getElementById("eliminated-table").getElementsByTagName("tbody")[0];

    eliminatedBox.style.display = "block"; // Make visible with animation
    eliminatedBox.style.opacity = "0"; // Start animation from hidden state
    setTimeout(() => {
        eliminatedBox.style.opacity = "1"; // Fade-in effect
        eliminatedBox.style.transform = "scale(1)";
    }, 100); // Small delay for a smooth effect

    eliminatedTable.innerHTML = ""; // Clear old data

    eliminatedPlayers.forEach(player => {
        let row = eliminatedTable.insertRow();
        row.innerHTML = `
            <td>${player.name}</td>
            <td>${player.roundEliminated}</td>
            <td>${player.wins}</td>
            <td>${player.losses}</td>
        `;
    });
}


        function nextRound() {
            currentPlayerIndex = 0;
            allNumbersSelected = false;
            players.forEach(player => player.selectedNumber = null);
            roundCount++; // Increment round count
            checkReverseMode();
            document.getElementById('result').style.display = 'none';
            renderGame();
        }

        function showFinalResults() {
            const winner = players.reduce((max, player) => (player.score > max.score ? player : max), players[0]);

const overlay = document.getElementById('winner-overlay');
const winnerText = document.getElementById('winner-text');
const winnerBadge = document.getElementById('winner-badge');
const eliminatedPlayersDiv = document.getElementById('eliminated-players');

// Funny Achievements for Eliminated Players
const winnerAchievements = [
    { title: "üèÜ KING OF MIND", emoji: "üëë" },
    { title: "üî• Unstoppable Champion", emoji: "üî•" },
    { title: "üé≠ Master of Mind Games", emoji: "üé≠" },
    { title: "‚ö° Lightning Fast Thinker", emoji: "‚ö°" },
    { title: "ü§ñ AI-Level Genius", emoji: "ü§ñ" },
    { title: "üéØ Precision King", emoji: "üéØ" },
    { title: "üîÆ Future Predictor", emoji: "üîÆ" },
    { title: "üí° Big Brain Time", emoji: "üí°" },
    { title: "üòÇ Lucky Winner", emoji: "üòÇ" },
    { title: "üòè Sneaky Mastermind", emoji: "üòè" }
];

const eliminatedAchievements = [
    { title: "üíÄ Aapse Nahi Hoga", emoji: "üíÄ" },
    { title: "üòµ Total Meltdown", emoji: "üòµ" },
    { title: "ü§£ The Joker", emoji: "ü§£" },
    { title: "üöÄ Went Too Far", emoji: "üöÄ" },
    { title: "üé≠ King of Bad Luck", emoji: "üé≠" },
    { title: "üïµÔ∏è Mysterious Player", emoji: "üïµÔ∏è" },
    { title: "üìÄ Broken Record", emoji: "üìÄ" },
    { title: "üé© Magician (Disappeared Early)", emoji: "üé©" },
    { title: "üçÄ Luck Ran Out", emoji: "üçÄ" },
    { title: "ü§° Sunday Aana Mast Nah Dhoh ke", emoji: "ü§°" }
];
let randomWinnerBadge = winnerAchievements[Math.floor(Math.random() * winnerAchievements.length)];
    winnerBadge.innerHTML = `${randomWinnerBadge.emoji} <b>${randomWinnerBadge.title}</b>`;
let randomBadge = "üèÜ KING OF MIND";

// Bigger & Glowing Winner Name
winnerText.innerHTML = `KING OF MIND is <span class="glow">${winner.name}</span>!`;

// Show Eliminated Players with Funny Titles
let eliminatedHTML = "<h2>Eliminated Players</h2><ul>";
    eliminatedPlayers.forEach(player => {
        let randomEliminatedBadge = eliminatedAchievements[Math.floor(Math.random() * eliminatedAchievements.length)];
        eliminatedHTML += `<li><strong>${player.name}</strong> - Eliminated in Round ${player.roundEliminated} (${randomEliminatedBadge.emoji} ${randomEliminatedBadge.title})</li>`;
    });
eliminatedHTML += "</ul>";

eliminatedPlayersDiv.innerHTML = eliminatedHTML;
overlay.classList.add('show');

// Generate confetti
for (let i = 0; i < 50; i++) {
            let confetti = document.createElement("div");
            confetti.classList.add("confetti");
            confetti.style.left = Math.random() * 100 + "vw";
            confetti.style.animationDuration = (Math.random() * 3 + 2) + "s";
            document.body.appendChild(confetti);
        }
    }


    function restartGame() {
        location.reload();
    }
    </script>
</body>
</html>
